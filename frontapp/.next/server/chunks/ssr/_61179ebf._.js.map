{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/src/app/profile/components/BackHeader.js"],"sourcesContent":["'use client'\r\n\r\nimport { ArrowLeft } from 'lucide-react'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nexport default function BackHeader() {\r\n  const router = useRouter()\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <button onClick={() => router.back()} aria-label=\"Go Back\">\r\n        <ArrowLeft size={20} />\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAO,SAAS,IAAM,OAAO,IAAI;YAAI,cAAW;sBAC/C,cAAA,8OAAC,gNAAA,CAAA,YAAS;gBAAC,MAAM;;;;;;;;;;;;;;;;AAIzB","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/src/app/profile/user/page.js"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport BackHeader from '../components/BackHeader' // keep this relative path if this file exists\r\nimport { getUser, checkPhone, updateUser } from '@/app/lib/api'\r\n\r\nexport default function UserProfilePage() {\r\n  const router = useRouter()\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [userId, setUserId] = useState(null)\r\n\r\n  // form state\r\n  const [phone, setPhone] = useState('')\r\n  const [name, setName] = useState('')\r\n  const [email, setEmail] = useState('')\r\n  const [dob, setDob] = useState('')       // yyyy-mm-dd\r\n  const [gender, setGender] = useState('') // MALE/FEMALE/OTHER\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      try {\r\n        setLoading(true)\r\n\r\n        // try saved id first\r\n        const savedId = localStorage.getItem('kazilen_user_id')\r\n        if (savedId) {\r\n          setUserId(savedId)\r\n          await fetchAndPopulate(savedId)\r\n          return\r\n        }\r\n\r\n        // fallback: try phone saved in localStorage\r\n        const savedPhone = localStorage.getItem('kazilen_user_phone')\r\n        if (savedPhone && savedPhone.match(/^\\d{10}$/)) {\r\n          const res = await checkPhone(savedPhone)\r\n          if (res?.exists && res?.userId) {\r\n            localStorage.setItem('kazilen_user_id', String(res.userId))\r\n            setUserId(String(res.userId))\r\n            await fetchAndPopulate(res.userId)\r\n            return\r\n          } else {\r\n            // not found — force login\r\n            alert('Phone not found on server. Please login again.')\r\n            router.push('/login')\r\n            return\r\n          }\r\n        }\r\n\r\n        // nothing found — redirect to login\r\n        router.push('/login')\r\n      } catch (err) {\r\n        console.error('Failed to load user:', err)\r\n        alert('Failed to load profile. Please try again.')\r\n        router.push('/login')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    load()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  async function fetchAndPopulate(id) {\r\n    const data = await getUser(id)\r\n    if (!data) {\r\n      throw new Error('User not found')\r\n    }\r\n    setPhone(data.phone ?? '')\r\n    setName(data.name ?? '')\r\n    setEmail(data.email ?? '')\r\n    if (data.dob) {\r\n      const d = String(data.dob).split('T')[0]\r\n      setDob(d)\r\n    } else {\r\n      setDob('')\r\n    }\r\n    setGender(data.gender ?? '')\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    if (!userId) {\r\n      alert('No user id found. Please re-login.')\r\n      router.push('/login')\r\n      return\r\n    }\r\n    if (!name.trim() || !dob || !gender) {\r\n      alert('Please fill name, date of birth and gender.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setSaving(true)\r\n      const payload = {\r\n        phone, // include phone (optional to change)\r\n        name: name.trim(),\r\n        email: email || null,\r\n        dob, // yyyy-mm-dd\r\n        gender: gender ? gender.toUpperCase() : null,\r\n      }\r\n\r\n      const updated = await updateUser(userId, payload)\r\n      if (payload.phone) localStorage.setItem('kazilen_user_phone', payload.phone)\r\n      alert('Profile updated successfully.')\r\n      if (updated) {\r\n        setName(updated.name ?? name)\r\n        setEmail(updated.email ?? email)\r\n        setDob(updated.dob ?? dob)\r\n        setGender(updated.gender ?? gender)\r\n      }\r\n    } catch (err) {\r\n      console.error(err)\r\n      const msg = err?.message || 'Update failed'\r\n      alert(`Update failed: ${msg}`)\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-white flex items-center justify-center\">\r\n        <div className=\"text-gray-600\">Loading profile…</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      <BackHeader />\r\n\r\n      <div className=\"p-4 space-y-4\">\r\n        <h2 className=\"text-lg font-semibold\">Your profile</h2>\r\n\r\n        {/* Phone (readonly) */}\r\n        <div>\r\n          <label className=\"text-xs text-gray-500\">Phone</label>\r\n          <input\r\n            type=\"tel\"\r\n            value={phone}\r\n            readOnly\r\n            className=\"w-full mt-1 px-3 py-2 border rounded-lg bg-gray-50 text-sm\"\r\n          />\r\n        </div>\r\n\r\n        {/* Name */}\r\n        <div>\r\n          <label className=\"text-xs text-gray-500\">Name</label>\r\n          <input\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"w-full mt-1 px-3 py-2 border rounded-lg text-sm\"\r\n            placeholder=\"Your full name\"\r\n          />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <div>\r\n          <label className=\"text-xs text-gray-500\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className=\"w-full mt-1 px-3 py-2 border rounded-lg text-sm\"\r\n            placeholder=\"you@example.com (optional)\"\r\n          />\r\n        </div>\r\n\r\n        {/* DOB */}\r\n        <div>\r\n          <label className=\"text-xs text-gray-500\">Date of birth</label>\r\n          <input\r\n            type=\"date\"\r\n            value={dob}\r\n            onChange={(e) => setDob(e.target.value)}\r\n            className=\"w-full mt-1 px-3 py-2 border rounded-lg text-sm\"\r\n          />\r\n        </div>\r\n\r\n        {/* Gender */}\r\n        <div>\r\n          <label className=\"text-xs text-gray-500\">Gender</label>\r\n          <select\r\n            value={gender}\r\n            onChange={(e) => setGender(e.target.value)}\r\n            className=\"w-full mt-1 px-3 py-2 border rounded-lg text-sm\"\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"MALE\">Male</option>\r\n            <option value=\"FEMALE\">Female</option>\r\n            <option value=\"OTHER\">Other</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"pt-2\">\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className={`w-full py-3 rounded-xl font-medium ${\r\n              saving ? 'bg-gray-300 text-gray-700 cursor-not-allowed' : 'bg-yellow-400 hover:bg-yellow-500 text-black'\r\n            }`}\r\n          >\r\n            {saving ? 'Saving…' : 'Save changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"file":"arrow-left.js","sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/node_modules/lucide-react/src/icons/arrow-left.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;IAC/C;QAAC,CAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAE;YAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAY,CAAA;YAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAU,CAAA;KAAA;CAC3C;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAY,CAAA,wKAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAc,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}