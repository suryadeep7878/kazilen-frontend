{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/src/app/create-account/page.js"],"sourcesContent":["// app/create-account/page.js\r\n'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { ArrowLeft } from 'lucide-react'\r\nimport { useRouter, useSearchParams } from 'next/navigation'\r\nimport { createUser } from '@/app/lib/api'\r\n\r\nexport default function CreateAccountPage() {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const phoneFromQuery = searchParams?.get('phone') || ''\r\n\r\n  const [name, setName] = useState('')\r\n  const [email, setEmail] = useState('')          // optional\r\n  const [dob, setDob] = useState('')              // YYYY-MM-DD (required)\r\n  const [gender, setGender] = useState('')        // required: Male/Female/Other\r\n  const [touched, setTouched] = useState({})      // for showing inline errors\r\n\r\n  // Keep phone as readonly state (optional: allow editing by using setPhone)\r\n  const [phone] = useState(phoneFromQuery)\r\n\r\n  // Required fields: name, dob, gender\r\n  const canSubmit = Boolean(name.trim() && dob && gender && /^\\d{10}$/.test(phone))\r\n\r\n  const handleCreateAccount = async () => {\r\n    // Client-side validation\r\n    if (!canSubmit) {\r\n      setTouched({ name: true, dob: true, gender: true })\r\n      alert('Please fill Name, Date of Birth, Gender and ensure phone is present.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      const genderEnum = gender ? gender.toUpperCase() : null // MALE/FEMALE/OTHER\r\n      const payload = {\r\n        phone,                 // IMPORTANT: include phone from query\r\n        name: name.trim(),\r\n        email: email || null,  // email optional\r\n        dob,                   // required\r\n        gender: genderEnum,    // required\r\n      }\r\n\r\n      const created = await createUser(payload)\r\n\r\n      // Save created user's id and phone locally for profile page\r\n      // Save under both legacy and canonical keys so all components pick it up\r\n      if (created?.id) {\r\n        const idStr = String(created.id)\r\n        localStorage.setItem('kazilen_user_id', idStr)\r\n        localStorage.setItem('userId', idStr)            // <-- important canonical key\r\n      }\r\n\r\n      if (created?.phone) {\r\n        localStorage.setItem('kazilen_user_phone', created.phone)\r\n        localStorage.setItem('kazilen_user_phone_v2', created.phone)\r\n      } else if (phone) {\r\n        // fallback if backend didn't echo phone\r\n        localStorage.setItem('kazilen_user_phone', phone)\r\n        localStorage.setItem('kazilen_user_phone_v2', phone)\r\n      }\r\n\r\n      // If you keep any client-side address cache keyed by userId, clear it here.\r\n      // Example: localStorage.removeItem('addresses_cache');\r\n      // (uncomment if you use such caching.)\r\n\r\n      alert('Account created successfully!')\r\n\r\n      // Replace navigation so back doesn't return to create-account\r\n      router.replace('/')\r\n    } catch (err) {\r\n      const msg = err?.message || 'Create failed'\r\n      alert(`Create failed: ${msg}`)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      {/* Top bar */}\r\n      <div className=\"flex items-center gap-3 p-4 shadow-sm border-b\">\r\n        <button onClick={() => router.back()} className=\"text-gray-700\">\r\n          <ArrowLeft size={20} />\r\n        </button>\r\n        <h1 className=\"text-lg font-semibold text-gray-800\">Create your profile</h1>\r\n      </div>\r\n\r\n      {/* Phone (readonly) */}\r\n      <div className=\"px-4 mt-4\">\r\n        <fieldset className={`relative border rounded-lg px-3 pt-4 pb-2`}>\r\n          <legend className=\"text-xs px-1 text-gray-500\">Phone</legend>\r\n          <input\r\n            type=\"tel\"\r\n            value={phone}\r\n            readOnly\r\n            className=\"w-full border-none bg-transparent p-0 text-sm text-gray-800 focus:outline-none\"\r\n          />\r\n        </fieldset>\r\n        {!/^\\d{10}$/.test(phone) && (\r\n          <p className=\"text-xs text-red-500 mt-1\">Phone not found or invalid. Go back to login and enter a valid phone.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Name (required) */}\r\n      <div className=\"px-4 mt-6\">\r\n        <fieldset className={`relative border rounded-lg px-3 pt-4 pb-2 ${touched.name && !name.trim() ? 'border-red-400' : 'border-gray-300'}`}>\r\n          <legend className=\"text-xs px-1 text-gray-500\">Name *</legend>\r\n          <input\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            onBlur={() => setTouched((t) => ({ ...t, name: true }))}\r\n            placeholder=\"Enter your full name\"\r\n            className=\"w-full border-none bg-transparent p-0 text-sm text-gray-800 focus:outline-none\"\r\n          />\r\n        </fieldset>\r\n        {touched.name && !name.trim() && (\r\n          <p className=\"text-xs text-red-500 mt-1\">Name is required.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Email (optional) */}\r\n      <div className=\"px-4 mt-4\">\r\n        <fieldset className=\"relative border border-gray-300 rounded-lg px-3 pt-4 pb-2\">\r\n          <legend className=\"text-xs px-1 text-gray-500\">Email (optional)</legend>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            placeholder=\"Enter your email\"\r\n            className=\"w-full border-none bg-transparent p-0 text-sm text-gray-800 focus:outline-none\"\r\n          />\r\n        </fieldset>\r\n      </div>\r\n\r\n      {/* Date of Birth (required) */}\r\n      <div className=\"px-4 mt-4\">\r\n        <fieldset className={`relative border rounded-lg px-3 pt-4 pb-2 ${touched.dob && !dob ? 'border-red-400' : 'border-gray-300'}`}>\r\n          <legend className=\"text-xs px-1 text-gray-500\">Date of birth *</legend>\r\n          <input\r\n            type=\"date\"\r\n            value={dob}\r\n            onChange={(e) => setDob(e.target.value)}\r\n            onBlur={() => setTouched((t) => ({ ...t, dob: true }))}\r\n            placeholder=\"YYYY-MM-DD\"\r\n            className=\"w-full border-none bg-transparent p-0 text-sm text-gray-800 focus:outline-none\"\r\n          />\r\n        </fieldset>\r\n        {touched.dob && !dob && (\r\n          <p className=\"text-xs text-red-500 mt-1\">Date of birth is required.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Gender (required) */}\r\n      <div className=\"px-4 mt-4 mb-6\">\r\n        <fieldset className={`relative border rounded-lg px-3 pt-4 pb-2 ${touched.gender && !gender ? 'border-red-400' : 'border-gray-300'}`}>\r\n          <legend className=\"text-xs px-1 text-gray-500\">Gender *</legend>\r\n          <select\r\n            value={gender}\r\n            onChange={(e) => setGender(e.target.value)}\r\n            onBlur={() => setTouched((t) => ({ ...t, gender: true }))}\r\n            className=\"w-full border-none bg-transparent text-sm text-gray-800 focus:outline-none\"\r\n          >\r\n            <option value=\"\" disabled>Select gender</option>\r\n            <option>Male</option>\r\n            <option>Female</option>\r\n            <option>Other</option>\r\n          </select>\r\n        </fieldset>\r\n        {touched.gender && !gender && (\r\n          <p className=\"text-xs text-red-500 mt-1\">Gender is required.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Create Account Button */}\r\n      <div className=\"px-4 pb-6\">\r\n        <button\r\n          onClick={handleCreateAccount}\r\n          disabled={!canSubmit}\r\n          className={`w-full py-3 rounded-xl font-medium ${\r\n            canSubmit\r\n              ? 'bg-yellow-400 hover:bg-yellow-500 text-black'\r\n              : 'bg-gray-200 text-gray-500 cursor-not-allowed'\r\n          }`}\r\n        >\r\n          Create Account\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"file":"arrow-left.js","sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/node_modules/lucide-react/src/icons/arrow-left.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;IAC/C;QAAC,CAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAE;YAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAY,CAAA;YAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAU,CAAA;KAAA;CAC3C;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAY,CAAA,wKAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAc,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}