{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/src/app/select-address/add/page.js"],"sourcesContent":["// select-address/add/page.js\r\n'use client'\r\n\r\nimport { useRouter } from 'next/navigation'\r\nimport { ArrowLeft } from 'lucide-react'\r\nimport { useState, useEffect } from 'react'\r\nimport { createAddress } from '@/app/lib/api' // adjust path if your alias differs\r\n\r\nexport default function AddAddressPage() {\r\n  const router = useRouter()\r\n\r\n  const [form, setForm] = useState({\r\n    userId: '',        // filled from localStorage in dev\r\n    label: '',\r\n    fullName: '',\r\n    phone: '',\r\n    addressLine1: '',\r\n    addressLine2: '',\r\n    landmark: '',\r\n    pin: '',\r\n    city: '',\r\n    state: '',\r\n  })\r\n\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  // helper: try a few localStorage keys we might have saved\r\n  const readUserIdFromStorage = () => {\r\n    if (typeof window === 'undefined') return null\r\n    // keys used across your app (old/new)\r\n    const keys = ['userId', 'kazilen_user_id', 'kazilen_userId', 'kazilen_user_id_v2']\r\n    for (const k of keys) {\r\n      const v = localStorage.getItem(k)\r\n      if (v) return v\r\n    }\r\n    return null\r\n  }\r\n\r\n  useEffect(() => {\r\n    // dev helper: get userId from localStorage if set\r\n    if (typeof window !== 'undefined') {\r\n      const uid = readUserIdFromStorage()\r\n      console.log('AddAddressPage mount — localStorage userId probe =', uid)\r\n      if (uid) {\r\n        const n = Number(uid)\r\n        const normalized = Number.isNaN(n) ? uid : n\r\n        // persist canonical key so other components pick it up\r\n        localStorage.setItem('userId', String(normalized))\r\n        setForm((f) => ({ ...f, userId: normalized }))\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target\r\n    setForm((prev) => ({ ...prev, [name]: value }))\r\n  }\r\n\r\n  const ensureUserId = () => {\r\n    // prefer form.userId, otherwise re-check storage (race-safe)\r\n    if (form.userId) return form.userId\r\n    const uid = readUserIdFromStorage()\r\n    if (uid) {\r\n      const n = Number(uid)\r\n      const normalized = Number.isNaN(n) ? uid : n\r\n      // persist canonical key\r\n      localStorage.setItem('userId', String(normalized))\r\n      setForm((f) => ({ ...f, userId: normalized }))\r\n      return normalized\r\n    }\r\n    return null\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const userIdVal = ensureUserId()\r\n    if (!userIdVal) {\r\n      // user not logged in — redirect to login. This is better UX than a raw alert.\r\n      alert('You must be logged in to add an address. Redirecting to login.')\r\n      router.push('/login')\r\n      return\r\n    }\r\n\r\n    if (!form.fullName || !form.phone || !form.addressLine1) {\r\n      alert('Please fill Full name, Mobile Number and Address line 1.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setLoading(true)\r\n      await createAddress({\r\n        userId: Number(userIdVal),\r\n        label: form.label,\r\n        fullName: form.fullName,\r\n        phone: form.phone,\r\n        addressLine1: form.addressLine1,\r\n        addressLine2: form.addressLine2,\r\n        landmark: form.landmark,\r\n        pin: form.pin,\r\n        city: form.city,\r\n        state: form.state,\r\n      })\r\n      router.push('/select-address')\r\n    } catch (err) {\r\n      console.error('Failed to add address:', err)\r\n      alert('Failed to add address: ' + (err?.message || 'unknown'))\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      <div className=\"flex items-center gap-3 p-4 shadow-sm border-b\">\r\n        <button onClick={() => router.back()} className=\"text-gray-700\">\r\n          <ArrowLeft size={20} />\r\n        </button>\r\n        <h1 className=\"text-lg font-semibold text-gray-800\">Add Address</h1>\r\n      </div>\r\n\r\n      <div className=\"p-4 space-y-4\">\r\n        {[\r\n          { label: 'Label (Home/Work)', name: 'label', type: 'text', placeholder: 'Home' },\r\n          { label: 'Full name (First and Last name)', name: 'fullName', type: 'text', placeholder: 'e.g. Bharat Singh' },\r\n          { label: 'Mobile Number', name: 'phone', type: 'tel', placeholder: 'e.g. 9876543210' },\r\n          { label: 'Flat, House no., Building, Company, Apartment', name: 'addressLine1', type: 'text', placeholder: 'e.g. IIIT NAGPUR' },\r\n          { label: 'Area, Street, Sector, Village', name: 'addressLine2', type: 'text', placeholder: 'e.g. near soot girni' },\r\n          { label: 'Landmark', name: 'landmark', type: 'text', placeholder: 'e.g. Next to MNLU college' },\r\n          { label: 'PIN Code', name: 'pin', type: 'text', placeholder: 'e.g. 482002' },\r\n          { label: 'Town/City', name: 'city', type: 'text', placeholder: 'e.g. BUTIBORI' },\r\n          { label: 'State', name: 'state', type: 'text', placeholder: 'e.g. Madhya Pradesh' }\r\n        ].map((field) => (\r\n          <div key={field.name}>\r\n            <label className=\"block text-sm text-gray-600 mb-1\">{field.label}</label>\r\n            <input\r\n              type={field.type}\r\n              name={field.name}\r\n              value={form[field.name] ?? ''}\r\n              onChange={handleChange}\r\n              placeholder={field.placeholder}\r\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-200\"\r\n            />\r\n          </div>\r\n        ))}\r\n\r\n        <button\r\n          onClick={handleSubmit}\r\n          disabled={loading}\r\n          className={`w-full bg-orange-500 text-white rounded-lg py-2 mt-6 font-semibold hover:bg-orange-600 transition ${loading ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n        >\r\n          {loading ? 'Adding...' : 'Add Address'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"file":"arrow-left.js","sources":["file:///C:/Users/surya/Desktop/customer/kazilen/frontend/node_modules/lucide-react/src/icons/arrow-left.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;IAC/C;QAAC,CAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAE;YAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAY,CAAA;YAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAU,CAAA;KAAA;CAC3C;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAY,CAAA,2KAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAc,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}